<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proffie Color Converter</title>
    <link rel="stylesheet" href="./assets/css/style.css">
    <style>
        .container {
            max-width: 800px;
        }

        .input-group {
            margin-bottom: 25px;
        }

        .rgb-inputs {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .rgb-input {
            display: flex;
            flex-direction: column;
            text-align: center;
        }

        .rgb-input label {
            font-size: 0.85rem;
            margin-bottom: 5px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #e0e0e0;
        }

        select {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            font-size: 16px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        select:focus {
            outline: none;
            border-color: #00d4ff;
            box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.2);
            background: rgba(255, 255, 255, 0.15);
        }

        select option {
            background: #2c3e50;
            color: #ffffff;
        }

        .color-preview {
            width: 100%;
            height: 60px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .output-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .output-label {
            font-weight: 600;
            color: #e0e0e0;
            margin-bottom: 10px;
            font-size: 0.95rem;
        }

        .output-value {
            font-family: 'Courier New', monospace;
            padding: 15px;
            border-radius: 8px;
            font-size: 14px;
            word-break: break-all;
            position: relative;
            margin-bottom: 15px;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .copy-btn {
            width: 100%;
            padding: 16px;
            background: linear-gradient(45deg, #00d4ff, #0099cc);
            border: none;
            border-radius: 12px;
            color: white;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .copy-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 212, 255, 0.3);
        }

        .copy-btn:active {
            transform: translateY(0);
        }

        .copy-btn.copied {
            background: linear-gradient(45deg, #27ae60, #2ecc71);
        }

        .conversion-info {
            background: rgba(0, 212, 255, 0.1);
            border-left: 4px solid #00d4ff;
            padding: 15px;
            margin-top: 20px;
            border-radius: 0 8px 8px 0;
            font-size: 0.9rem;
            color: #e0e0e0;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
                margin: 10px;
            }

            h1 {
                font-size: 2rem;
            }

            .rgb-inputs {
                grid-template-columns: 1fr;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>
            Proffie Color Converter
        </h1>
        
        <div class="input-group">
            <label for="colorSelect">Named Colors (Optional):</label>
            <select id="colorSelect">
                <option value="">Select a named color...</option>
            </select>
            
            <div class="rgb-inputs">
                <div class="rgb-input">
                    <label for="red">Red</label>
                    <input type="number" id="red" min="0" max="255" value="30" placeholder="0-255">
                </div>
                <div class="rgb-input">
                    <label for="green">Green</label>
                    <input type="number" id="green" min="0" max="255" value="144" placeholder="0-255">
                </div>
                <div class="rgb-input">
                    <label for="blue">Blue</label>
                    <input type="number" id="blue" min="0" max="255" value="255" placeholder="0-255">
                </div>
            </div>
            
            <div class="color-preview" id="colorPreview"></div>
        </div>

        <div class="output-section">
            <div class="output-label">Proffie 16-bit Values:</div>
            <div class="output-value" id="output">"7700,36864,65535"</div>
            <button class="copy-btn" id="copyBtn" onclick="copyToClipboard()">Copy to Clipboard</button>
        </div>

        <div class="conversion-info">
            <strong>Conversion:</strong> 8-bit RGB (0-255) → 16-bit Proffie (0-65535)<br>
            Formula: (RGB_value / 255) × 65535
        </div>
    </div>

	<div class="footer">
		Created by <span class="creator">JediMasterTech</span>
	</div>

    <script>
        // Named colors data - will be populated from CSV
        let namedColors = [];
        
        // CSV data for named colors
        const csvData = `Color Name,R,G,B
aliceblue,240,248,255
antiquewhite,250,235,215
aqua,0,255,255
aquamarine,127,255,212
azure,240,255,255
beige,245,245,220
bisque,255,228,196
black,0,0,0
blanchedalmond,255,235,205
blue,0,0,255
blueviolet,138,43,226
brown,165,42,42
burlywood,222,184,135
cadetblue,95,158,160
chartreuse,127,255,0
chocolate,210,105,30
coral,255,127,80
cornflowerblue,100,149,237
cornsilk,255,248,220
crimson,220,20,60
cyan,0,255,255
darkblue,0,0,139
darkcyan,0,139,139
darkgoldenrod,184,134,11
darkgray,169,169,169
darkgreen,0,100,0
darkgrey,169,169,169
darkkhaki,189,183,107
darkmagenta,139,0,139
darkolivegreen,85,107,47
darkorange,255,140,0
darkorchid,153,50,204
darkred,139,0,0
darksalmon,233,150,122
darkseagreen,143,188,143
darkslateblue,72,61,139
darkslategray,47,79,79
darkslategrey,47,79,79
darkturquoise,0,206,209
darkviolet,148,0,211
deeppink,255,20,147
deepskyblue,0,191,255
dimgray,105,105,105
dimgrey,105,105,105
dodgerblue,30,144,255
firebrick,178,34,34
floralwhite,255,250,240
forestgreen,34,139,34
fuchsia,255,0,255
gainsboro,220,220,220
ghostwhite,248,248,255
gold,255,215,0
goldenrod,218,165,32
gray,128,128,128
green,0,128,0
greenyellow,173,255,47
grey,128,128,128
honeydew,240,255,240
hotpink,255,105,180
indianred,205,92,92
indigo,75,0,130
ivory,255,255,240
khaki,240,230,140
lavender,230,230,250
lavenderblush,255,240,245
lawngreen,124,252,0
lemonchiffon,255,250,205
lightblue,173,216,230
lightcoral,240,128,128
lightcyan,224,255,255
lightgoldenrodyellow,250,250,210
lightgray,211,211,211
lightgreen,144,238,144
lightgrey,211,211,211
lightpink,255,182,193
lightsalmon,255,160,122
lightseagreen,32,178,170
lightskyblue,135,206,250
lightslategray,119,136,153
lightslategrey,119,136,153
lightsteelblue,176,196,222
lightyellow,255,255,224
lime,0,255,0
limegreen,50,205,50
linen,250,240,230
magenta,255,0,255
maroon,128,0,0
mediumaquamarine,102,205,170
mediumblue,0,0,205
mediumorchid,186,85,211
mediumpurple,147,112,219
mediumseagreen,60,179,113
mediumslateblue,123,104,238
mediumspringgreen,0,250,154
mediumturquoise,72,209,204
mediumvioletred,199,21,133
midnightblue,25,25,112
mintcream,245,255,250
mistyrose,255,228,225
moccasin,255,228,181
navajowhite,255,222,173
navy,0,0,128
oldlace,253,245,230
olive,128,128,0
olivedrab,107,142,35
orange,255,165,0
orangered,255,69,0
orchid,218,112,214
palegoldenrod,238,232,170
palegreen,152,251,152
paleturquoise,175,238,238
palevioletred,219,112,147
papayawhip,255,239,213
peachpuff,255,218,185
peru,205,133,63
pink,255,192,203
plum,221,160,221
powderblue,176,224,230
purple,128,0,128
red,255,0,0
rosybrown,188,143,143
royalblue,65,105,225
saddlebrown,139,69,19
salmon,250,128,114
sandybrown,244,164,96
seagreen,46,139,87
seashell,255,245,238
sienna,160,82,45
silver,192,192,192
skyblue,135,206,235
slateblue,106,90,205
slategray,112,128,144
slategrey,112,128,144
snow,255,250,250
springgreen,0,255,127
steelblue,70,130,180
tan,210,180,140
teal,0,128,128
thistle,216,191,216
tomato,255,99,71
turquoise,64,224,208
violet,238,130,238
wheat,245,222,179
white,255,255,255
whitesmoke,245,245,245
yellow,255,255,0
yellowgreen,154,205,50`;

        function parseCSV(csvText) {
            const lines = csvText.trim().split('\n');
            const headers = lines[0].split(',');
            const data = [];
            
            for (let i = 1; i < lines.length; i++) {
                const values = lines[i].split(',');
                const row = {};
                headers.forEach((header, index) => {
                    if (header === 'R' || header === 'G' || header === 'B') {
                        row[header] = parseInt(values[index]);
                    } else {
                        row[header] = values[index];
                    }
                });
                data.push(row);
            }
            return data;
        }

        function initializeNamedColors() {
            namedColors = parseCSV(csvData);
            populateColorDropdown();
        }

        function populateColorDropdown() {
            const select = document.getElementById('colorSelect');
            
            // Sort colors alphabetically
            const sortedColors = [...namedColors].sort((a, b) => 
                a['Color Name'].localeCompare(b['Color Name'])
            );
            
            sortedColors.forEach(color => {
                const option = document.createElement('option');
                option.value = `${color.R},${color.G},${color.B}`;
                option.textContent = color['Color Name'];
                select.appendChild(option);
            });
        }

        function findColorByRGB(r, g, b) {
            return namedColors.find(color => 
                color.R === r && color.G === g && color.B === b
            );
        }

        function onColorSelectChange() {
            const select = document.getElementById('colorSelect');
            const selectedValue = select.value;
            
            if (selectedValue) {
                const [r, g, b] = selectedValue.split(',').map(Number);
                document.getElementById('red').value = r;
                document.getElementById('green').value = g;
                document.getElementById('blue').value = b;
                updateOutput();
            }
        }

        function rgbToProffie(r, g, b) {
            // Convert 8-bit RGB (0-255) to 16-bit Proffie values (0-65535)
            const proffieR = Math.round((r / 255) * 65535);
            const proffieG = Math.round((g / 255) * 65535);
            const proffieB = Math.round((b / 255) * 65535);
            
            return { r: proffieR, g: proffieG, b: proffieB };
        }

        function getContrastColor(r, g, b) {
            // Calculate luminance using the relative luminance formula
            const luminance = (0.299 * r + 0.587 * g + 0.114 * b) / 255;
            
            // Return white text for dark backgrounds, black text for light backgrounds
            return luminance > 0.5 ? '#000000' : '#ffffff';
        }

        function updateOutput() {
            const r = parseInt(document.getElementById('red').value) || 0;
            const g = parseInt(document.getElementById('green').value) || 0;
            const b = parseInt(document.getElementById('blue').value) || 0;
            
            // Clamp values to 0-255 range
            const clampedR = Math.max(0, Math.min(255, r));
            const clampedG = Math.max(0, Math.min(255, g));
            const clampedB = Math.max(0, Math.min(255, b));
            
            // Convert to Proffie values
            const proffieColors = rgbToProffie(clampedR, clampedG, clampedB);
            
            // Update output with color preview background and contrasted text
            const output = document.getElementById('output');
            output.textContent = `"${proffieColors.r},${proffieColors.g},${proffieColors.b}"`;
            output.style.backgroundColor = `rgb(${clampedR}, ${clampedG}, ${clampedB})`;
            output.style.color = getContrastColor(clampedR, clampedG, clampedB);
            
            // Update color preview
            const colorPreview = document.getElementById('colorPreview');
            colorPreview.style.backgroundColor = `rgb(${clampedR}, ${clampedG}, ${clampedB})`;
            
            // Update dropdown selection based on RGB values
            updateDropdownSelection(clampedR, clampedG, clampedB);
            
            // Reset copy button
            const copyBtn = document.getElementById('copyBtn');
            copyBtn.textContent = 'Copy to Clipboard';
            copyBtn.classList.remove('copied');
        }

        function updateDropdownSelection(r, g, b) {
            const select = document.getElementById('colorSelect');
            const matchingColor = findColorByRGB(r, g, b);
            
            if (matchingColor) {
                select.value = `${r},${g},${b}`;
            } else {
                select.value = '';
            }
        }

		function copyToClipboard() {
			const output = document.getElementById('output').textContent;
			
			// Check clipboard API support
			if (!navigator.clipboard) {
				// Fallback for older browsers
				const textArea = document.createElement('textarea');
				textArea.value = output;
				textArea.style.position = 'fixed';
				textArea.style.opacity = '0';
				document.body.appendChild(textArea);
				textArea.select();
				
				try {
					document.execCommand('copy');
					const copyBtn = document.getElementById('copyBtn');
					copyBtn.textContent = 'Copied!';
					copyBtn.classList.add('copied');
					setTimeout(() => {
						copyBtn.textContent = 'Copy to Clipboard';
						copyBtn.classList.remove('copied');
					}, 2000);
				} catch (err) {
					console.error('Copy failed:', err);
					alert('Copy failed. Please select the text manually.');
				} finally {
					document.body.removeChild(textArea);
				}
			} else {
				// Modern clipboard API with proper error handling
				navigator.clipboard.writeText(output).then(() => {
					const copyBtn = document.getElementById('copyBtn');
					copyBtn.textContent = 'Copied!';
					copyBtn.classList.add('copied');
					setTimeout(() => {
						copyBtn.textContent = 'Copy to Clipboard';
						copyBtn.classList.remove('copied');
					}, 2000);
				}).catch(err => {
					console.error('Copy failed:', err);
					// Try fallback method
					const textArea = document.createElement('textarea');
					textArea.value = output;
					textArea.style.position = 'fixed';
					textArea.style.opacity = '0';
					document.body.appendChild(textArea);
					textArea.select();
					try {
						document.execCommand('copy');
						const copyBtn = document.getElementById('copyBtn');
						copyBtn.textContent = 'Copied!';
						copyBtn.classList.add('copied');
					} catch (fallbackErr) {
						alert('Copy failed. Please select the text manually.');
					}
					document.body.removeChild(textArea);
				});
			}
		}

        // Add event listeners
        document.getElementById('red').addEventListener('input', updateOutput);
        document.getElementById('green').addEventListener('input', updateOutput);
        document.getElementById('blue').addEventListener('input', updateOutput);
        document.getElementById('colorSelect').addEventListener('change', onColorSelectChange);

        // Handle enter key and input validation
        document.querySelectorAll('input[type="number"]').forEach(input => {
            input.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    updateOutput();
                }
            });
            
            input.addEventListener('blur', (e) => {
                let value = parseInt(e.target.value);
                if (isNaN(value) || value < 0) value = 0;
                if (value > 255) value = 255;
                e.target.value = value;
                updateOutput();
            });
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            initializeNamedColors();
            updateOutput();
        });
    </script>
</body>
</html>